---
interface Props {
  blog: {
    thumbnail: {
      src: string;
      alt?: string;
    };
    categories: string[];
    title: string;
    author: {
      id: string;
    };
    pubDate: Date;
  };
  author: {
    name: string;
    avatar: {
      src: string;
      alt?: string;
    };
  };
    content: string;
};

const { blog, author, content } = Astro.props as Props;

function extractContent(text: string) {
  if (typeof text !== "string") return "";
  const lines = text.split("\n");
  if (lines[0] && lines[0].startsWith("#")) {
    lines.shift()?.replace("#", "").trim() || "";
  }
  const content = lines.join(" ");
  return content;
}

---

<div class="text-white p-4 rounded-lg space-y-3">
  <div class="relative rounded-2xl overflow-hidden">
    <img src={blog.thumbnail.src} alt={blog.thumbnail.alt} class="w-full h-52 object-cover" />
  </div>
  <div class="space-y-2">
    <h2 class="text-xl font-bold">{blog.title}</h2>
    <p class="text-sm">{content}</p>
    <div class="flex items-center space-x-2">
      <img src={author.avatar.src} alt={author.name} class="w-8 h-8 rounded-full" />
      <span>{author.name}</span>
    </div>
    <div class="text-xs text-gray-400">{new Date(blog.pubDate).toLocaleDateString()}</div>
    <div class="flex space-x-2">
      {blog.categories.map(category => (
        <span class="bg-gray-700 px-2 py-1 rounded">{category}</span>
      ))}
    </div>
  </div>
</div>